# 答案格式规则

## 核心原则

### ✅ 允许的答案格式

#### 1. 整数

```
0, 1, 2, -1, -2, 3, 4, 5...
```

#### 2. 简单小数（最多2位）

```
✅ 0.5  (= 1/2)
✅ 0.25 (= 1/4)
✅ 0.75 (= 3/4)
✅ 1.5  (= 3/2)
✅ 2.5
```

#### 3. 符号形式（最佳选择）

```
✅ \frac{1}{2}        (优于 0.5)
✅ \frac{\sqrt{2}}{2} (而非 0.707...)
✅ \sqrt{3}           (而非 1.732...)
✅ \pi
✅ e
```

---

### ❌ 禁止的答案格式

#### 多位小数（≥3位）

```
❌ 0.707106781...
❌ 1.732050808...
❌ 0.866025404...
❌ 2.718281828...
❌ 3.141592654...
```

**原因：** 不符合考试标准，且不精确

---

## 三角函数答案规范

### 特殊值对照表

| 角度 | sin | cos | tan |
|------|-----|-----|-----|
| 0° | `0` | `1` | `0` |
| 30° | `\frac{1}{2}` 或 `0.5` | `\frac{\sqrt{3}}{2}` | `\frac{\sqrt{3}}{3}` |
| 45° | `\frac{\sqrt{2}}{2}` | `\frac{\sqrt{2}}{2}` | `1` |
| 60° | `\frac{\sqrt{3}}{2}` | `\frac{1}{2}` 或 `0.5` | `\sqrt{3}` |
| 90° | `1` | `0` | undefined |

### 推荐顺序

1. **最佳：** 符号形式

   ```
   \frac{\sqrt{2}}{2}, \sqrt{3}, \pi
   ```

2. **可接受：** 简单小数

   ```
   0.5, 0.25, 1.5
   ```

3. **禁止：** 多位小数

   ```
   0.707..., 1.732..., 2.718...
   ```

---

## 实例对比

### sin(30°)

```python
# 推荐
answer = "\\frac{1}{2}"

# 可接受
answer = "0.5"

# 两者可以混用
```

### cos(45°)

```python
# ✅ 正确
answer = "\\frac{\\sqrt{2}}{2}"

# ❌ 错误
answer = "0.707106781"
answer = "0.707"
```

### tan(60°)

```python
# ✅ 正确
answer = "\\sqrt{3}"

# ❌ 错误
answer = "1.732050808"
answer = "1.732"
```

### π 和 e

```python
# ✅ 正确
answer = "\\pi"
answer = "e"
answer = "2\\pi"

# ❌ 错误
answer = "3.14159"
answer = "2.71828"
```

---

## 选项生成规则

### 三角函数题

```python
# 符号形式的值池
TRIG_VALUE_POOL = [
    '0',
    '0.5',                    # 简单小数，可用
    '\\frac{1}{2}',           # 符号形式，更佳
    '\\frac{\\sqrt{2}}{2}',   # 必须用符号
    '\\frac{\\sqrt{3}}{2}',   # 必须用符号
    '1',
    '\\sqrt{3}',              # 必须用符号
]

# ❌ 禁止使用
FORBIDDEN_VALUES = [
    '0.707',      # 应该用 \frac{\sqrt{2}}{2}
    '0.866',      # 应该用 \frac{\sqrt{3}}{2}
    '1.732',      # 应该用 \sqrt{3}
]
```

---

## 判断标准

### 如何判断小数是否可用

```python
def is_simple_decimal(value_str):
    """判断小数是否简单（可用）"""
    if '.' not in value_str:
        return True  # 整数

    decimal_part = value_str.split('.')[-1]

    # 小数位数 ≤ 2
    if len(decimal_part) <= 2:
        return True

    return False

# 示例
is_simple_decimal("0.5")    # True  ✅
is_simple_decimal("0.25")   # True  ✅
is_simple_decimal("0.707")  # False ❌
is_simple_decimal("1.732")  # False ❌
```

---

## 题目生成检查清单

生成题目时必须确保：

- [ ] 整数和简单小数（≤2位）可以直接使用
- [ ] 复杂值必须使用符号形式
- [ ] 不使用3位及以上的小数
- [ ] √2/2 而非 0.707
- [ ] √3 而非 1.732
- [ ] π 而非 3.14
- [ ] e 而非 2.71

---

## 总结

| 值类型 | 示例 | 是否允许 | 推荐形式 |
|--------|------|----------|----------|
| 整数 | 0, 1, 2 | ✅ | 直接使用 |
| 简单小数 | 0.5, 0.25 | ✅ | 可用，但符号更佳 |
| 多位小数 | 0.707, 1.732 | ❌ | 禁止 |
| 根式 | √2, √3 | ✅ | 推荐 |
| 分数 | 1/2, √2/2 | ✅ | 推荐 |
| π, e | π, 2π, e | ✅ | 推荐 |

**原则：能用符号就用符号，简单小数可接受，多位小数禁止。**





